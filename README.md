# CVSC 中央体征管理平台

## 项目概述

CVSC（Central Vital Signs Collection）中央体征管理平台是一个基于 Streamlit 开发的医院体征数据管理和监控系统。该项目用于实时采集、存储、分析和展示患者的生命体征数据，支持多厂商医疗设备的数据接入与标准化处理。

## 新增功能

### 🆕 项目结构优化
- **模块化设计**: 将单文件应用重构为多模块架构，提高代码可维护性
- **登录认证**: 新增用户登录系统，支持多用户角色管理
- **组件化开发**: 将通用功能封装为可复用组件

### 🔐 登录功能
- 预设用户账号：
  - 管理员：`admin` / `admin123`
  - 医生：`doctor` / `doctor123`
  - 护士：`nurse` / `nurse123`
- 会话状态管理
- 安全退出功能

## 项目结构

```
cvsc-streamlit/
├── app.py                    # 主应用程序入口
├── config.py                 # 应用配置文件
├── requirements.txt          # 依赖包列表
├── auth/                     # 认证模块
│   ├── __init__.py
│   └── login.py             # 登录认证功能
├── database/                 # 数据库模块
│   ├── __init__.py
│   ├── connection.py        # 数据库连接管理
│   └── queries.py           # 数据库查询函数
├── pages/                    # 页面模块
│   ├── __init__.py
│   ├── dashboard.py         # 实时监控看板
│   ├── patient_analysis.py  # 患者数据分析
│   ├── device_management.py # 设备管理
│   ├── field_mapping.py     # 字段映射
│   └── system_logs.py       # 系统日志
├── components/               # 组件模块
│   ├── __init__.py
│   ├── patient_detail.py    # 患者详情组件
│   └── common.py            # 通用组件
├── utils/                    # 工具模块
│   ├── __init__.py
│   └── helpers.py           # 辅助函数
└── doc/                      # 文档目录
    └── cvsc_ddl.txt         # 数据库表定义
```

## 安装和运行

### 环境要求
- Python 3.8+
- SQL Server 数据库

### 安装依赖
```bash
pip install -r requirements.txt
```

### 运行应用
```bash
streamlit run app.py
```

### 环境变量配置
系统使用以下环境变量配置数据库连接：
- `DB_USER`: 数据库用户名（默认：wnopuser）
- `DB_PASSWORD`: 数据库密码（默认：hayymoni2018）
- `DB_HOST`: 数据库主机地址（默认：10.52.197.73）
- `DB_NAME`: 数据库名称（默认：UNIONDEV）

## 主要功能

### 1. 登录认证 🔐
- 多用户登录系统
- 会话状态管理
- 安全退出功能

### 2. 实时监控看板 📊
- 全院体征数据实时监控
- 多维度患者搜索和筛选
- 卡片视图和列表视图切换
- 患者详情查看

### 3. 患者数据分析 📈
- 历史数据查询和分析
- 多维度对比分析
- 数据可视化图表

### 4. 设备管理 ⚙️
- 设备资产信息管理
- 设备状态监控
- 新增设备登记

### 5. 字段映射 🔌
- 设备字段与标准字段映射配置
- 转换公式设置
- 映射关系管理

### 6. 系统日志 📋
- 系统运行状态监控
- 采集服务日志统计
- 性能指标展示

## 技术栈

- **前端框架**: Streamlit
- **后端语言**: Python
- **数据库**: SQL Server
- **ORM**: SQLAlchemy
- **数据处理**: pandas, numpy
- **可视化**: plotly
- **认证**: Session State 管理

## 开发规范

- 模块化设计，职责分离
- 配置文件统一管理
- 数据库连接池优化
- 缓存机制提高性能
- 错误处理和日志记录
- 代码注释和文档完善

## 更新日志

### v2.0.0 (2025-12-01)
- ✨ 新增用户登录认证系统
- 🔧 重构项目为模块化架构
- 📦 分离配置管理
- 🗄️ 优化数据库连接和查询
- 🧩 组件化开发，提高代码复用性
- 📚 完善项目文档

### v1.0.0
- 🎉 初始版本发布
- 📊 实时监控看板
- 📈 患者数据分析
- ⚙️ 设备管理
- 🔌 字段映射
- 📋 系统日志